{"version":3,"sources":["libs/mobilebone.js","C:/Users/LucyS/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["root","factory","document","MBLOADED","define","amd","cmd","exports","Mobilebone","store","array","slice","isSimple","isWebkit","documentElement","style","webkitHidden","supportHistory","history","support","hasInited","VERSION","captureLink","captureForm","rootTransition","mergeCallback","classAnimation","classPage","classMask","pushStateEnabled","evalScript","window","navigator","userAgent","indexOf","top","popstate","transition","pageInto","pageOut","back","options","arguments","length","isNaN","defaults","form","onpagefirstinto","animationstart","animationend","preventdefault","fallback","callback","params","element","getAttribute","_params","_dataparams","_queryToObject","forEach","key","getFunction","local_function_key","apply","paramsOut","paramsIn","classList","preventOut","isPreventOut","preventInto","isPreventInto","call","funAnimationCall","page","data","flagAniBind","animationkey","index","animition","webkitkey","replace","matchs","toUpperCase","animateEventName","addEventListener","contains","display","remove","add","offsetWidth","removeSelf","title","header","querySelector","firstPage","innerHTML","setAttribute","pageid","id","hashid","firstintoBind","querySelectorAll","submit","urlPush","urlPushReplace","test","location","hash","setTimeout","domOrId","elePage","tagName","toLowerCase","getCleanUrl","parentElement","removeChild","trigger","url","href","formdata","cleanUrl","nodeType","action","method","$","fn","serialize","control","name","disabled","val","value","trim","type","checked","push","strContainer","attrContainer","queryContainer","arrData","keyValue","encodeURIComponent","join","split","createPage","domHtml","eleOrObj","response","container","isreload","optionsTransition","titlePage","idContainer","classPageInside","getElementById","target","reload","eleCurrentPage","eleCreatePage","create","createElement","appendChild","getElementsByTagName","originScript","scriptContent","src","head","script","createTextNode","insertBefore","firstChild","eleCreateTitle","className","innerText","Date","now","query","body","keys","fun","arrKey","ajax","aOrFormOrObj","dataType","timeout","async","username","password","success","error","complete","eleMask","formData","paramsFromTrigger","attrMask","queryFromUrl","FormData","key2","children","filter","showLoading","xhr","XMLHttpRequest","open","onload","status","JSON","parse","jsonHandle","e","message","hideLoading","onerror","ontimeout","setRequestHeader","send","event","attrPrevent","funPrevent","preventDefault","isBack","pageIn","tempBack","compareDocumentPosition","json","init","eleIn","jQuery","Zepto","tap","handleTapEvent","getParentElementByTag","isSafari7","match","hidden","chrome","popstateswipe","touches","selfPage","getElementsByClassName","capture","rel","external","attrHref","hashTargetPage","idTargetPage","queryTargetPage","eleTargetPage","attrReload","ele","Element","prototype","tag","parent","popup","tagParent","string","obj","part","arrPart","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","close","onclose","log","removeErrorOverlay","stack","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"mobilebone.c5f78b34.js","sourceRoot":"..","sourcesContent":["/*\n * mobilebone.js\n * by zhangxinxu(.com) 2014-09-26\n * https://github.com/zhangxinxu/mobilebone\n * bone of switch for mobile web app\n**/\n\n(function(root, factory) {\n\tif (document.MBLOADED) { return; }\n\t// Set up Mobilebone appropriately for the environment.\n\tif (typeof define === \"function\" && (define.amd || define.cmd)) {\n\t\tdefine(\"mobilebone\", function(exports) {\n\t\t\treturn factory(root, exports);\n\t\t});\n\t// Finally, as a browser global.\n\t} else {\n\t\troot.Mobilebone = factory(root, {});\n\t}\n})(this, function(root, Mobilebone) {\n\tif (document.MBLOADED) {\n\t\treturn \"Don\\'t repeat load Mobilebone!\";\n\t}\n\n\t// Avoid repeated callbacks\n\tvar store = {};\n\n\t// Create local references to array methods we'll want to use later.\n\tvar array = [];\n\tvar slice = array.slice;\n\n\t// Is it a id selector\n\tvar isSimple = /^#?\\w+(?:[\\-_]\\w+)*$/i;\n\n\t// Is it webkit\n\tvar isWebkit = \"WebkitAppearance\" in document.documentElement.style || typeof document.webkitHidden != \"undefined\";\n\n\t// Is it suppory history API\n\tvar supportHistory = \"pushState\" in history && \"replaceState\" in history;\n\n\tMobilebone.support = supportHistory;\n\n\tvar hasInited = false;\n\n\t/**\n\t * Current version of the library. Keep in sync with `package.json`.\n\t *\n\t * @type string\n\t**/\n\tMobilebone.VERSION = \"2.7.4\";\n\n\t/**\n\t * Whether catch attribute of href from element with tag 'a'\n\t * If the value set to false, jump links in a refresh form(not slide)\n\t * In most cases, you do not need to care about this parameter.\n\t   Except some special pages that should refresh all links, as test/index.html show.\n\t   However, if your only want several links refesh, you can use data-ajax=\"false\" or data-rel=\"external\"\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.captureLink = true;\n\n\t/**\n\t * Whether catch events of 'submit' from <form> element\n\t * If the value set to false, <form> is a normal form except data-ajax=\"true\"\n\t * If the value set to true, <form> will submit as a ajax request,\n\t   and the return value will be used to create a new page and transition into meanwhile.\n\t   However, if data-ajax=\"false\", <form> won't submit as a ajax.\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.captureForm = true;\n\n\t/**\n\t * The root of transition-callback\n\t * Default value is 'root', you can consider as window-object.\n\t   However, there are may many callbacks, it's impossible that all functions are global function.\n\t   We may custom a global object to store our callbacks, such as:\n\t   Callback = {\n\t\t fun1: function() {},\n\t\t fun2: function() {},\n\t\t fun3: function() {},\n\t   }\n\t   In this case, the value of 'obilebone.rootTransition' should set Callback;\n\t *\n\t * @type object\n\t**/\n\tMobilebone.rootTransition = root;\n\n\t/**\n\t * Whether merge(vs cover) global callback and local callback\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.mergeCallback = true;\n\n\t/**\n\t *  className of animation\n\t *\n\t * @type string\n\t**/\n\tMobilebone.classAnimation = \"slide\";\n\t/**\n\t *  for mark page element\n\t *\n\t * @type string\n\t**/\n\tMobilebone.classPage = \"page\";\n\t/**\n\t * className for mark mask element\n\t *\n\t * @type string\n\t**/\n\tMobilebone.classMask = \"mask\";\n\t/**\n\t * Whether url changes when history changes\n\t * If this value is false, the url will be no change.\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.pushStateEnabled = true;\n\t/**\n\t * Whether excute JavaScript when ajax HTML loaded\n\t * If this value is true, the script will excute.\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.evalScript = false;\n\n\tif (// When running inside a FF iframe, calling replaceState causes an error. So set 'pushStateEnabled = false'\n\t\t(window.navigator.userAgent.indexOf( \"Firefox\" ) >= 0 && window.top !== window)\n\t) {\n\t\tMobilebone.pushStateEnabled = false;\n\t}\n\n\t/**\n\t * if browser do not support history/classList, stop here\n\t**/\n\tif (supportHistory == false) {\n\t\treturn Mobilebone;\n\t}\n\n\t/**\n\t * don't excute window.onpopstate when page load\n\t**/\n\thistory.popstate = false;\n\n\t/**\n\t * Function for transition\n\t * In most cases, you are unnecessary to use this function , unlike Mobilebone.createPage\n\n\t * @params  pageInto: dom-object. Element which will transform into. - Necessary\n\t            pageOut:  dom-object. Element which will transform out.   - Optional\n\t\t\t    back:     boolean.    Direction of transition.          - Optional\n\t\t\t    options:  object.     Cover or add parameters.           - Optional\n\t * @returns undefined\n\t * @example Mobilebone.transition(element);\n\t            Mobilebone.transition(element1, element2);\n\t\t        Mobilebone.transition(element1, element2, true);\n\t\t        Mobilebone.transition(element1, element2, { id: \"only\" });\n\t\t        Mobilebone.transition(element1, element2, true, { id: \"only\" });\n\t**/\n\tMobilebone.transition = function(pageInto, pageOut, back, options) {\n\t\tif (arguments.length == 0 || pageInto == pageOut) return;\n\t\tif (arguments.length == 3 && isNaN(back * 1) == true) {\n\t\t\toptions = back;\n\t\t\tback = options.back;\n\t\t};\n\n\t\t//if those parameters is missing\n\t\tpageOut = pageOut || null, back = back || false, options = options || {};\n\n\t\t// defaults parameters\n\t\tvar defaults = {\n\t\t\t// the value of callback is a key name, and the host is root here.\n\t\t\t// eg. if the name of animationstart is 'doLoading', so the script will execute 'root.doLoading()'\n\t\t\t// By default, the value of root is 'window'\n\t\t\troot: this.rootTransition,\n\t\t\t// the form of transition, the value (eg. 'slide') will be a className to add or remove.\n\t\t\t// of course, u can set to other valeu, for example, 'fade' or 'flip'. However, u shou add corresponding CSS3 code.\n\t\t\tform: this.form || this.classAnimation,\n\t\t\t// 'animationstart/animationend/...' are callbacks params\n\t\t\t// Note: those all global callbacks!\n\t\t\tonpagefirstinto: this.onpagefirstinto,\n\t\t\tanimationstart: this.animationstart,\n\t\t\tanimationend: this.animationend,\n\t\t\tpreventdefault: this.preventdefault,\n\t\t\tfallback: this.fallback,\n\t\t\tcallback: this.callback\n\t\t}, params = function(element) {\n\t\t\tif (!element || !element.getAttribute) return {};\n\n\t\t\tvar _params = {}, _dataparams = _queryToObject(element.getAttribute(\"data-params\") || \"\");\n\n\t\t\t// rules as follow:\n\t\t\t// data-* > data-params > options > defaults\n\t\t\t[\"title\", \"root\", \"form\"].forEach(function(key) {\n\t\t\t\t_params[key] = element.getAttribute(\"data-\" + key) || _dataparams[key] || options[key] || defaults[key];\n\t\t\t});\n\n\t\t\tif (typeof _params.root == \"string\") {\n\t\t\t\t_params.root = Mobilebone.getFunction(_params.root);\n\t\t\t}\n\n\t\t\t[\"onpagefirstinto\", \"callback\", \"fallback\", \"animationstart\", \"animationend\", \"preventdefault\"].forEach(function(key) {\n\t\t\t\tif (Mobilebone.mergeCallback == true && typeof defaults[key] == \"function\") {\n\t\t\t\t\t// merge global callback\n\t\t\t\t\tvar local_function_key = element.getAttribute(\"data-\" + key) || _dataparams[key];\n\t\t\t\t\tif (typeof _params.root[local_function_key] == \"function\") {\n\t\t\t\t\t\t_params[key] = function() {\n\t\t\t\t\t\t\tdefaults[key].apply(this, arguments);\n\t\t\t\t\t\t\t_params.root[local_function_key].apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof options[key] == \"function\") {\n\t\t\t\t\t\t_params[key] = function() {\n\t\t\t\t\t\t\tdefaults[key].apply(this, arguments);\n\t\t\t\t\t\t\toptions[key].apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_params[key] = defaults[key];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// replace global callback\n\t\t\t\t\t_params[key] = element.getAttribute(\"data-\" + key) || _dataparams[key] || options[key] || defaults[key];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn _params;\n\t\t};\n\n\t\t// get params of each\n\t\tvar paramsOut = params(pageOut), paramsIn = params(pageInto);\n\n\t\tif (pageOut != null && pageOut.classList) {\n\t\t\t// weather prevent transition\n\t\t\tvar preventOut = paramsOut.preventdefault, isPreventOut = false;\n\t\t\tif (typeof preventOut == \"string\") {\n\t\t\t\tpreventOut = paramsOut.root[preventOut];\n\t\t\t}\n\t\t}\n\t\tif (pageInto != null && pageInto.classList) {\n\t\t\t// weather prevent transition\n\t\t\tvar preventInto = paramsIn.preventdefault, isPreventInto = false;\n\t\t\tif (typeof preventInto == \"string\") {\n\t\t\t\tpreventInto = paramsIn.root[preventInto];\n\t\t\t}\n\t\t}\n\t\tif (typeof preventOut == \"function\") {\n\t\t\tisPreventOut = preventOut.call(paramsOut.root, pageInto, pageOut, options);\n\t\t}\n\n\t\t// if functions of 'preventdefault' are same for pageIn and pageout, just excute once.\n\t\tif (isPreventOut == true && preventOut === preventInto) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof preventInto == \"function\") {\n\t\t\tisPreventInto = preventInto.call(paramsIn.root, pageInto, pageOut, options);\n\t\t}\n\t\t// if pageinto stopped, stop all\n\t\tif (isPreventInto == true) {\n\t\t\t// only run here and nothing more\n\t\t\treturn false;\n\t\t}\n\n\t\t// set animation callback as a method\n\t\tvar funAnimationCall = function(page, data) {\n\t\t\tif (page.flagAniBind == true) return;\n\t\t\t// do callback when animation start/end\n\t\t\t[\"animationstart\", \"animationend\"].forEach(function(animationkey, index) {\n\t\t\t\tvar animition = paramsIn[animationkey], webkitkey = \"webkit\" + animationkey.replace(/^a|s|e/g, function(matchs) {\n\t\t\t\t\treturn matchs.toUpperCase();\n\t\t\t\t});\n\t\t\t\tvar animateEventName = isWebkit? webkitkey: animationkey;\n\t\t\t\t// if it's the out element, hide it when 'animationend'\n\t\t\t\tif (index) {\n\t\t\t\t\tpage.addEventListener(animateEventName, function() {\n\t\t\t\t\t\tif (this.classList.contains(\"in\") == false) {\n\t\t\t\t\t\t\tthis.style.display = \"none\";\n\t\t\t\t\t\t\t// add on v2.5.5\n\t\t\t\t\t\t\t// move here on v2.5.8\n\t\t\t\t\t\t\t// main for remove page is just current page\n\t\t\t\t\t\t\t// remove on v2.7.0\n\t\t\t\t\t\t\t// if (this.removeSelf == true) {\n\t\t\t\t\t\t\t// \tthis.parentElement.removeChild(this);\n\t\t\t\t\t\t\t// \tthis.removeSelf = null;\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.classList.remove(params(this).form);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// bind animation events\n\t\t\t\tif (typeof animition == \"string\" && paramsIn.root[animition]) {\n\t\t\t\t\tpage.addEventListener(animateEventName, function() {\n\t\t\t\t\t\tdata.root[animition].call(data.root, this, this.classList.contains(\"in\")? \"into\": \"out\", options);\n\t\t\t\t\t});\n\t\t\t\t} else if (typeof animition == \"function\") {\n\t\t\t\t\tpage.addEventListener(animateEventName, function() {\n\t\t\t\t\t\tanimition.call(data.root, this, this.classList.contains(\"in\")? \"into\": \"out\", options);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// set a flag\n\t\t\t\tpage.flagAniBind = true;\n\t\t\t});\n\t\t};\n\n\t\tif (pageOut != null && pageOut.classList) {\n\t\t\t// do transition if there are no 'prevent'\n\t\t\tif (isPreventOut != true) {\n\t\t\t\tpageOut.classList.add(paramsOut.form);\n\t\t\t\t// reflow\n\t\t\t\tpageOut.offsetWidth = pageOut.offsetWidth;\n\t\t\t\t// go, go, go\n\t\t\t\tpageOut.style.display = \"block\";\n\t\t\t\tpageOut.classList.add(\"out\");\n\t\t\t\tpageOut.classList.remove(\"in\");\n\t\t\t\t// if reverse direction\n\t\t\t\tpageOut.classList[back? \"add\": \"remove\"](\"reverse\");\n\n\t\t\t\t// add on v2.5.5\n\t\t\t\tpageOut.removeSelf = pageOut.removeSelf || null;\n\n\t\t\t\t// set animation callback for 'pageInto'\n\t\t\t\t// for issues #153\n\t\t\t\tfunAnimationCall(pageOut, paramsOut);\n\n\t\t\t\t// do fallback every time\n\t\t\t\tvar fallback = paramsOut.fallback;\n\t\t\t\tif (typeof fallback == \"string\") {\n\t\t\t\t\tfallback = paramsOut.root[fallback];\n\t\t\t\t}\n\t\t\t\tif (typeof fallback == \"function\") {\n\t\t\t\t\tfallback.call(paramsOut.root, pageInto, pageOut, options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (pageInto != null && pageInto.classList) {\n\t\t\t// for title change\n\t\t\tvar title = paramsIn.title,\n\t\t\t    header = document.querySelector(\"h1\"),\n\t\t\t    firstPage = document.querySelector(\".\" + this.classPage);\n\n\t\t\t// do title change\n\t\t\tif (title && options.title !== false) {\n\t\t\t\tdocument.title = title;\n\t\t\t\tif (header) {\n\t\t\t\t\theader.innerHTML = title;\n\t\t\t\t\theader.title = title;\n\t\t\t\t}\n\t\t\t} else if (firstPage == pageInto && !pageOut && document.title) {\n\t\t\t\t// set data-title for first visibie page\n\t\t\t\tpageInto.setAttribute(\"data-title\", document.title);\n\t\t\t}\n\n\t\t\t// delete page with same id when options.remove !== false\n\t\t\tvar pageid = options.id || pageInto.id;\n\t\t\tvar hashid = options.id || pageInto.id;\n\n\t\t\t// v2.7.0 change rule -> don't auto delete pages\n\t\t\t//                    -> delete by using Mobilebone.remove();\n\t\t\t// v2.7.2 add using data-reload=\"xxxxId\" to auto remove pages\n\t\t\t// Reason Two:\n\t\t\t// 1. Most websites are so simple that it's not enough to talk about performance;\n\t\t\t// 2. We can't judge relation by two page's url\n\t\t\t\t// eg, below 'if' sentence only cover sence 0:\n\t\t\t\t/*\n\t\t\t\tif (options.id) {\n\t\t\t\t\t// eg. get 'ajax.php' from 'ajax.php?xx=1'\n\t\t\t\t \tpageid = pageid.split(\"?\")[0];\n\t\t\t\t}\n\t\t\t\t*/\n\n\t\t\t\t// 0. url format: //xxx.com/list.php\n\t\t\t\t                  //xxx.com/detail.php?id=1\n\t\t\t\t                  //xxx.com/detail.php?id=2\n\n\t\t\t\t// but not sence 1 and 2:\n\n\t\t\t\t// 1. url format: //xxx.com/list/111/\n\t\t\t\t                  //xxx.com/list/222/\n\t\t\t\t                  //xxx.com/list/333/\n\t\t\t\t                  // \n\n\t            // 2. url format: //xxx.com/index.php   \n\t                              //xxx.com/index.php?list=1   1\n\t                              //xxx.com/index.php?list=2   2\n\t                              // \n\n\t\t\t// var relid = store[\"_\" + pageid];\n\t\t\t// // only delete page auto when data-reload is not 'false' or null\n\t\t\t// // hashid may store the same page, we should delete also\n\t\t\t// // when data-reload not 'false' or null\n\t\t\t// // v2.4.4+\n\t\t\t// if (relid && store[relid] && options.reload == true) {\n\t\t\t// \tdelete store[relid];\n\t\t\t// \tdelete store[\"_\" + pageid];\n\t\t\t// }\n\n\t\t\t// // below commented on v2.6.2\n\t\t\t// if (options.reload == true) {\n\t\t\t// \t// v2.5.8 for issues #147\n\t\t\t// \tpageInto.removeSelf = true;\n\t\t\t// }\n\n\t\t\t// if (store[pageid] && store[pageid] != pageInto) {\n\n\n\t\t\t// \tif (store[pageid] != pageOut) {\n\t\t\t// \t\tstore[pageid].parentElement && store[pageid].parentElement.removeChild(store[pageid]);\n\t\t\t// \t} else {\n\t\t\t// \t\t// if the page element same as store\n\t\t\t// \t\t// remove when animationend\n\t\t\t// \t\tpageOut.removeSelf = true;\n\t\t\t// \t}\n\t\t\t// \tdelete store[pageid];\n\t\t\t// }\n\n\t\t\t// do transition\n\t\t\tif (pageOut) {\n\t\t\t\tpageInto.classList.add(paramsIn.form);\n\t\t\t}\n\t\t\t// iOS bug\n\t\t\t// reflow for fixing issues #80, #86\n\t\t\tpageInto.offsetWidth = pageInto.offsetWidth;\n\t\t\t// go~ as normal\n\t\t\tpageInto.style.display = \"block\";\n\t\t\tpageInto.classList.remove(\"out\");\n\t\t\tpageInto.classList.add(\"in\");\n\t\t\t// if reverse direction\n\t\t\tpageInto.classList[back? \"add\": \"remove\"](\"reverse\");\n\n\t\t\t// do callback when come in first time\n\t\t\tvar onpagefirstinto = paramsIn.onpagefirstinto;\n\t\t\t// first judge change to pageInto store\n\t\t\t// v2.5.5 add for fix issues #138\n\t\t\tif (!pageInto.firstintoBind) {\n\t\t\t\tif (typeof onpagefirstinto == \"string\" && paramsIn.root[onpagefirstinto]) {\n\t\t\t\t\tparamsIn.root[onpagefirstinto].call(paramsIn.root, pageInto, pageOut, options);\n\t\t\t\t} else if (typeof onpagefirstinto == \"function\") {\n\t\t\t\t\tonpagefirstinto.call(paramsIn.root, pageInto, pageOut, options);\n\t\t\t\t}\n\t\t\t\t// capture form submit\n\t\t\t\tslice.call(pageInto.querySelectorAll(\"form\")).forEach(function(form) {\n\t\t\t\t\tMobilebone.submit(form);\n\t\t\t\t});\n\n\t\t\t\tpageInto.firstintoBind = true;\n\t\t\t}\n\n\t\t\t// set animation callback for 'pageInto'\n\t\t\tfunAnimationCall(pageInto, paramsIn);\n\n\t\t\t// history\n\t\t\t// hashid should a full url address\n\t\t\t// different with pageid\n\t\t\t// add on 2.4.2\n\t\t\tvar urlPush = hashid, urlPushReplace = \"\";\n\n\t\t\tif (urlPush && /^#/.test(urlPush) == false) {\n\t\t\t\turlPush = \"#\" + urlPush;\n\t\t\t}\n\t\t\turlPushReplace = urlPush.replace(/^#/, \"#&\");\n\n\t\t\tif (supportHistory && this.pushStateEnabled && options.history !== false && urlPush\n\t\t\t\t// hash should be different\n\t\t\t\t// can fix issues #79, #87 maybe\n\t\t\t\t&& urlPushReplace != location.hash\n\t\t\t) {\n\t\t\t\t// don't trigger 'popstate' events\n\t\t\t\thistory.popstate = false;\n\t\t\t\t// if only pageIn, use 'replaceState'\n\t\t\t\thistory[pageOut? \"pushState\": \"replaceState\"](null, document.title, urlPush.replace(/^#/, \"#&\"));\n\t\t\t}\n\n\t\t\t// store page-id, just once\n\t\t\tif (!store[pageid]) {\n\t\t\t\tstore[pageid] = pageInto;\n\t\t\t\t// when we back/prev, we need to get true\n\t\t\t\t// comment on v2.7.0\n\t\t\t\t// if (hashid !== pageid) {\n\t\t\t\t// \tstore[hashid] = pageInto;\n\t\t\t\t// \tstore[\"_\" + pageid] = hashid;\n\t\t\t\t// }\n\t\t\t}\n\n\t\t\t// do callback every time\n\t\t\tvar callback = paramsIn.callback;\n\n\t\t\tif (typeof callback == \"string\") {\n\t\t\t\tcallback = paramsIn.root[callback];\n\t\t\t}\n\t\t\tif (typeof callback == \"function\") {\n\t\t\t\tcallback.call(paramsIn.root, pageInto, pageOut, options);\n\t\t\t}\n\n\t\t\t// Safari do 'popstate' after 'pushState/replaceState'\n\t\t\t// So, we neet setTimeout to avoid excuting 'Mobilebone.transition()' twice\n\t\t\tsetTimeout(function() {\n\t\t\t\t// reset to popable state\n\t\t\t\thistory.popstate = true;\n\t\t\t}, 17);\n\t\t}\n\t};\n\n\t/**\n\t * Remove page DOM add on v2.7.0\n\t * @param  domOrId: dom-object|string\n\t *          page DOM or <a> DOM\n\t *          page id or <a> href value\n\t * @return {[type]}         [description]\n\t */\n\tMobilebone.remove = function (domOrId) {\n\t\tif (!domOrId) {\n\t\t\treturn this;\n\t\t}\n\n\t\tvar elePage = domOrId;\n\t\tvar pageid = domOrId;\n\t\tif (typeof pageid == \"string\") {\n\t\t\telePage = store[pageid];\n\t\t} else if (elePage.tagName && elePage.tagName.toLowerCase() == \"a\") {\n\t\t\tpageid = this.getCleanUrl(elePage);\n\t\t\telePage = store[pageid];\n\t\t}\n\n\t\tif (elePage && elePage.parentElement) {\n\t\t\telePage.parentElement.removeChild(elePage);\n\t\t\t// remove store\n\t\t\tfor (var key in store) {\n\t\t\t\tif (store[key] == elePage) {\n\t\t\t\t\tdelete store[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/**\n\t * For getting whole ajax url\n\t * In most cases, you are unnecessary to use this function\n\n\t * @params  trigger: dom-object. element with tag-\"a\".  - Optional(at least one)\n\t            url:     string. ajax url.                  - Optional(at least one)\n\t\t\t    params:  string|object. ajax params.        - Optional\n\t * @returns string\n\t * @example Mobilebone.getCleanUrl(elementOfA);\n\t            Mobilebone.getCleanUrl(elementOfForm);\n\t            Mobilebone.getCleanUrl(elementOfA, '', \"a=1&b=2\");\n\t\t        Mobilebone.getCleanUrl(null, \"xxx.html\");\n\t\t        Mobilebone.getCleanUrl(null, \"xxx.html?a=1&b=2\");\n\t\t        Mobilebone.getCleanUrl(null, \"xxx.html\", \"a=1&b=2\");\n\t**/\n\tMobilebone.getCleanUrl = function(trigger, url, params) {\n\t\tvar href = \"\", formdata = \"\", cleanUrl = \"\";\n\t\tif (trigger) {\n\t\t\t if (trigger.nodeType == 1) {\n\t\t\t\t // form element\n\t\t\t\t if (trigger.action) {\n\t\t\t\t\t href = trigger.getAttribute(\"action\");\n\t\t\t\t\t // add on v2.4.1\n\t\t\t\t\t if (trigger.method && trigger.method.toUpperCase() == \"POST\") {\n\t\t\t\t\t\t return href;\n\t\t\t\t\t } else if (window.$ && $.fn && $.fn.serialize) {\n\t\t\t\t\t\t// use jquery serialize()\n\t\t\t\t\t\tformdata = $(trigger).serialize();\n\t\t\t\t\t } else {\n\t\t\t\t\t\tformdata = {};\n\t\t\t\t\t\t// simple serialize from Mobilebone\n\t\t\t\t\t\tslice.call(trigger.querySelectorAll(\"input,select,textarea\")).forEach(function(control) {\n\t\t\t\t\t\t\tif (control.name && !control.disabled) {\n\t\t\t\t\t\t\t\tvar val = control.value.trim(), name = control.name;\n\t\t\t\t\t\t\t\tif (/^radio|checkbox/i.test(control.type)) {\n\t\t\t\t\t\t\t\t\tif (control.checked) {\n\t\t\t\t\t\t\t\t\t\tif (formdata[name]) {\n\t\t\t\t\t\t\t\t\t\t\tformdata[name].push(val);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tformdata[name] = [val];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tformdata[name] = [val];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t }\n\t\t\t\t } else {\n\t\t\t\t\t// a element\n\t\t\t\t\thref = trigger.getAttribute(\"href\");\n\t\t\t\t\tformdata = trigger.getAttribute(\"data-formdata\") || trigger.getAttribute(\"data-data\") || \"\";\n\t\t\t\t\t// v2.6.1 for #107\n\t\t\t\t\t// remember container when refresh\n\t\t\t\t\tvar strContainer = \"container\", attrContainer = trigger.getAttribute(\"data-\" + strContainer);\n\t\t\t\t\tif (formdata.indexOf(strContainer) == -1 && attrContainer) {\n\t\t\t\t\t\tvar queryContainer = strContainer + \"=\" + attrContainer;\n\t\t\t\t\t\tformdata = formdata ? formdata + \"&\" + queryContainer : queryContainer;\n\t\t\t\t\t}\n\t\t\t\t }\n\t\t\t } else if (trigger.url) {\n\t\t\t\t href = trigger.url;\n\t\t\t\t formdata = trigger.data;\n\t\t\t }\n\t\t}\n\n\t\tif (!(href = href || url)) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\t// get formdata\n\t\tformdata = formdata || params || \"\";\n\n\t\tif (typeof formdata == \"object\") {\n\t\t\tvar arrData = [];\n\t\t\tfor (key in formdata) {\n\t\t\t\tif (!formdata[key].forEach) {\n\t\t\t\t\tformdata[key] = [formdata[key]];\n\t\t\t\t}\n\t\t\t\tformdata[key].forEach(function(keyValue) {\n\t\t\t\t\tarrData.push(key + \"=\" + encodeURIComponent(keyValue));\n\t\t\t\t});\n\n\t\t\t}\n\t\t\tif (arrData.length > 0) {\n\t\t\t\tformdata = arrData.join(\"&\");\n\t\t\t} else {\n\t\t\t\tformdata = \"\";\n\t\t\t}\n\t\t}\n\n\t\t// get url of root\n\t\tcleanUrl = href.split(\"#\")[0].replace(/&+$/, \"\");\n\n\t\tif (cleanUrl.slice(-1) == \"?\") {\n\t\t\tcleanUrl = cleanUrl.split(\"?\")[0];\n\t\t}\n\t\t// url = root_url + joiner + formdata\n\t\tif (formdata != \"\") {\n\t\t\tif (/\\?/.test(cleanUrl)) {\n\t\t\t\tformdata = formdata.replace(/^&|\\?/, \"\");\n\t\t\t\tcleanUrl = cleanUrl + \"&\" + formdata;\n\t\t\t} else if (formdata != \"\") {\n\t\t\t\tformdata = formdata.replace(\"?\", \"\");\n\t\t\t\tcleanUrl = cleanUrl + \"?\" + formdata;\n\t\t\t}\n\t\t}\n\t\treturn cleanUrl;\n\t};\n\n\t/**\n\t * Create page according to given Dom-element or HTML string. And, notice!!!!! will do transition auto.\n\n\t * @params  domHtml:        dom-object|string. Create this to dom element as a role of into-page.               - Necessary\n\t            eleOrObj: dom-object|object. '.page element', or 'a element', or 'options' for get out-page   - Optional\n\t\t\t\toptions:            object.            basically, options = ajax options, of course, u can custom it!   - Optional\n\t * @returns undefined\n\t * @example Mobilebone.createPage(pageDom);\n\t            Mobilebone.createPage(generalDom);\n\t\t        Mobilebone.createPage('<div class=\"page out\">xxx</div>');\n\t\t        Mobilebone.createPage('<p>xxx</p>');\n\t\t        Mobilebone.createPage(pageDom, triggerLink);\n\t\t        Mobilebone.createPage(pageDom, { response: '<div...>' });\n\t\t        Mobilebone.createPage(pageDom, triggerLink, { response: '<div...>' });\n\t *\n\t**/\n\tMobilebone.createPage = function(domHtml, eleOrObj, options) {\n\t\tvar response = null, container = null, classPage = this.classPage, isreload = null;\n\t\t// 'eleOrObj' can '.page element', or 'a element', or 'options'\n\t\t// basically, options = ajax options, of course, u can custom it!\n\t\tif (!domHtml) return;\n\t\tif (typeof options == \"undefined\" && typeof eleOrObj == \"object\") {\n\t\t\toptions = eleOrObj;\n\t\t}\n\t\toptions = options || {};\n\n\t\t// 'options' that 'Mobilebone.transition()' needs\n\t\tvar optionsTransition = {};\n\n\t\t// get page-title from eleOrObj or options\n\t\tvar titlePage, idContainer, classPageInside;\n\n\t\tif (eleOrObj) {\n\t\t\tif (eleOrObj.nodeType == 1) {\n\t\t\t\t// legal elements\n\t\t\t\tif (eleOrObj.href || eleOrObj.action) {\n\t\t\t\t\ttitlePage = eleOrObj.getAttribute(\"data-title\") || options.title;\n\t\t\t\t}\n\t\t\t\tresponse = options.response;\n\t\t\t\tidContainer = eleOrObj.getAttribute(\"data-container\");\n\t\t\t\tcontainer = document.getElementById(idContainer);\n\t\t\t\tclassPageInside = eleOrObj.getAttribute(\"data-classpage\");\n\t\t\t\t// pass element as target params, add on v2.3.0\n\t\t\t\toptionsTransition.target = eleOrObj;\n\t\t\t\t// v2.4.4 is_root  isreload\n\t\t\t\tisreload = eleOrObj.getAttribute(\"data-reload\");\n\t\t\t\tif (eleOrObj.tagName.toLowerCase() == \"form\" || (isreload !== null && isreload != \"false\")) {\n\t\t\t\t\toptionsTransition.reload = true;\n\t\t\t\t}\n\t\t\t\t// v2.5.2\n\t\t\t\t// is back? for issues #128\n\t\t\t\toptionsTransition.back = eleOrObj.getAttribute(\"data-rel\") == \"back\";\n\n\t\t\t\t// v2.6.0 history\n\t\t\t\tif (eleOrObj.getAttribute(\"data-history\") == \"false\") {\n\t\t\t\t\toptionsTransition.history = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresponse = eleOrObj.response || options.response;\n\t\t\t\ttitlePage = eleOrObj.title || options.title;\n\t\t\t\tcontainer = eleOrObj.container || options.container;\n\t\t\t\tclassPageInside = eleOrObj.classPage || options.classPage;\n\t\t\t\toptionsTransition.target = eleOrObj.target;\n\t\t\t\t// v2.5.2\n\t\t\t\t// is back? for issues #128\n\t\t\t\toptionsTransition.back = eleOrObj.back || options.back;\n\t\t\t}\n\t\t\tif (container && classPageInside) {\n\t\t\t\tclassPage = classPageInside;\n\t\t\t}\n\t\t}\n\n\t\t// get current page(will be out) according to 'page_or_child'\n\t\tvar eleCurrentPage = (classPage == classPageInside? container : document).querySelector(\".in.\" + classPage);\n\n\t\t// get create page (will be into) according to 'domHtml'\n\t\tvar eleCreatePage = null;\n\n\t\tvar create = document.createElement(\"div\");\n\t\tif (typeof domHtml == \"string\") {\n\t\t\tcreate.innerHTML = domHtml;\n\t\t} else {\n\t\t\tcreate.appendChild(domHtml);\n\t\t}\n\n\t\t// excute inline JavaScript\n\t\tif (Mobilebone.evalScript == true && domHtml.firstintoBind != true) {\n\t\t\tslice.call(create.getElementsByTagName(\"script\")).forEach(function(originScript) {\n\t\t\t\tvar scriptContent = originScript.innerHTML.trim(), type = originScript.getAttribute(\"type\");\n\t\t\t\tif (scriptContent.trim() == \"\" || originScript.src) return;\n\t\t\t\tvar head = document.getElementsByTagName(\"head\")[0] || document.documentElement,\n\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\tif (type) script.type = type;\n\t\t\t\tscript.appendChild(document.createTextNode(scriptContent));\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\thead.insertBefore(script, head.firstChild);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t\tscript = null;\n\t\t\t\t}, 17);\n\t\t\t\toriginScript = null;\n\t\t\t});\n\t\t}\n\n\t\tvar eleCreateTitle = create.getElementsByTagName(\"title\")[0];\n\n\t\t// get the page element\n\t\tif (!(eleCreatePage = create.querySelector(\".\" + classPage))) {\n\t\t\t// if there no .page, create as eleCreatePage\n\t\t\tcreate.className = classPage + \" out\";\n\t\t\teleCreatePage = create;\n\t\t}\n\t\t// set and store title\n\t\tif (typeof titlePage == \"string\") {\n\t\t\teleCreatePage.setAttribute(\"data-title\", titlePage);\n\t\t} else if (eleCreateTitle && eleCreateTitle.innerText) { // the judge behind '&&' for issues #144\n\t\t\teleCreatePage.setAttribute(\"data-title\", eleCreateTitle.innerText);\n\t\t}\n\n\t\t// do transition\n\t\toptionsTransition.response = response || domHtml;\n\t\toptionsTransition.id = this.getCleanUrl(eleOrObj) || eleCreatePage.id || options.id || options.url || (\"unique\" + Date.now());\n\n\t\t// 'if' statement below added on v2.0.0\n\t\tif (typeof options == \"object\") {\n\t\t\tif (typeof options.history != \"undefined\") {\n\t\t\t\toptionsTransition.history = options.history;\n\t\t\t}\n\t\t\tif (typeof options.remove != \"undefined\") {\n\t\t\t\toptionsTransition.remove = options.remove;\n\t\t\t}\n\t\t\tif (typeof options.target != \"undefined\") {\n\t\t\t\toptionsTransition.target = options.target;\n\t\t\t}\n\t\t\tif (typeof options.title != \"undefined\") {\n\t\t\t\toptionsTransition.title = options.title;\n\t\t\t}\n\t\t\t// add on v2.7.4\n\t\t\tif (typeof options.query != \"undefined\") {\n\t\t\t\toptionsTransition.query = options.query;\n\t\t\t}\n\t\t}\n\t\tif (classPage == classPageInside) {\n\t\t\toptionsTransition.history = false;\n\t\t\toptionsTransition.classPage = classPage;\n\t\t}\n\n\t\t// append to a accurate position\n\t\tcontainer = container || document.body;\n\n\t\t// remove page if have same id when optionsTransition.remove == true\n\t\tif (optionsTransition.remove == true && optionsTransition.id) {\n\t\t\tthis.remove(optionsTransition.id);\n\t\t}\n\t\t// 1. if new page, that insert create page as a last-child\n\t\t// 2. if replace a page, that insert before replaced page\n\t\tvar pageid = optionsTransition.id.split(\"?\")[0];\n\t\tif (pageid && store[pageid] && container.contains(store[pageid])) {\n\t\t\tcontainer.insertBefore(eleCreatePage, store[pageid]);\n\t\t} else {\n\t\t\tcontainer.appendChild(eleCreatePage);\n\t\t}\n\n\t\t// release memory\n\t\tcreate = null;\n\n\t\t// do transition\n\t\tthis.transition(eleCreatePage, eleCurrentPage, optionsTransition);\n\t};\n\n\t/**\n\t * For ajax callback.\n\t * For example, data-success=\"a.b.c\". We can't use 'a.b.c' as a function, because it's a string. We should do some work to get it!\n\n\t * @params  keys:        string. - Necessary\n\t * @returns function\n\t            undefined keys is not string\n\t\t\t\twindow    keys undefined\n\t * @example Mobilebone.getFunction(\"a.b.c\");\n\t *\n\t**/\n\tMobilebone.getFunction = function(keys) {\n\t\tif (typeof keys != \"string\") return;\n\t\t// eg. 'globalObject.functionName'\n\t\tvar fun = Mobilebone.rootTransition, arrKey = keys.split(\".\");\n\t\tfor (var index=0; index<arrKey.length; index+=1) {\n\t\t\tif (!(fun = fun[arrKey[index]])) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn fun;\n\t};\n\n\t/**\n\t * For ajax request to get HTML or JSON.\n\n\t * @params  aOrFormOrObj        - Necessary\n\t            1. dom-object:<a>|<form>.\n\t\t\t\t2. object.\n\t * @returns undefined\n\t * @example Mobilebone.ajax(document.querySelector(\"a\"));\n\t            Mobilebone.ajax({\n\t\t\t\t  url: 'xxx.html',\n\t\t\t\t  success: function() {}\n\t\t    \t});\n\t *\n\t**/\n\tMobilebone.ajax = function(aOrFormOrObj) {\n\t\tif (!aOrFormOrObj) return;\n\n\t\t// default params\n\t\tvar defaults = {\n\t\t\turl: \"\",\n\t\t\ttype: \"\",\n\t\t\tdataType: \"\",\n\t\t\tdata: {},\n\t\t\ttimeout: 10000,\n\t\t\tasync: true,\n\t\t\tusername: \"\",\n\t\t\tpassword: \"\",\n\t\t\tsuccess: function() {},\n\t\t\terror: function() {},\n\t\t\tcomplete: function() {}\n\t\t};\n\n\t\tvar params = {}, eleMask = null, formData = null;\n\n\t\t// classname of mask\n\t\tvar classMask = this.classMask;\n\n\t\t// if 'aOrFormOrObj' is a element, we should turn it to options-object\n\t\tvar paramsFromTrigger = {}, attrMask;\n\t\tif (aOrFormOrObj.nodeType == 1) {\n\t\t\tparamsFromTrigger = _queryToObject(aOrFormOrObj.getAttribute(\"data-params\") || \"\");\n\t\t\t// get params\n\t\t\tfor (key in defaults) {\n\t\t\t\t// data-* > data-params > defaults\n\t\t\t\tparams[key] = aOrFormOrObj.getAttribute(\"data-\" + key) || paramsFromTrigger[key] || defaults[key];\n\t\t\t\tif (typeof defaults[key] == \"function\" && typeof params[key] == \"string\") {\n\t\t\t\t\t// eg. globalObject.functionName\n\t\t\t\t\tparams[key] = this.getFunction(params[key]);\n\t\t\t\t\tif (typeof params[key] != \"function\") {\n\t\t\t\t\t\tparams[key] = defaults[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// address of ajax url\n\t\t\tparams.url = this.getCleanUrl(aOrFormOrObj, params.url);\n\n\t\t\tvar queryFromUrl = _queryToObject(params.url.split('?')[1]);\n\n\t\t\t// v2.7.4 fix params may ingore problem\n\t\t\tfor (var key in queryFromUrl) {\n\t\t\t\tif (typeof paramsFromTrigger[key] == 'undefined') {\n\t\t\t\t\tparamsFromTrigger[key] = queryFromUrl[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// v2.7.4\n\t\t\tparams.query = paramsFromTrigger;\n\t\t\t// store target\n\t\t\tparams.target = aOrFormOrObj;\n\t\t\t// v2.5.2\n\t\t\t// is back? for issues #128\n\t\t\tparams.back = aOrFormOrObj.getAttribute(\"data-rel\") == \"back\";\n\n\t\t\tvar tagName = aOrFormOrObj.tagName.toLowerCase();\n\t\t\tif (tagName == \"form\") {\n\t\t\t\tparams.type = aOrFormOrObj.method;\n\n\t\t\t\tformData = new FormData(aOrFormOrObj);\n\t\t\t} else if (tagName == \"a\") {\n\t\t\t\t// v2.5.8 for issues #157\n\t\t\t\tvar idContainer = aOrFormOrObj.getAttribute(\"data-container\"),\n\t\t\t\t\tclassPageInside = aOrFormOrObj.getAttribute(\"data-classpage\"),\n\t\t\t\t\tcontainer = idContainer && document.getElementById(idContainer);\n\t\t\t\tif (container && classPageInside && classPageInside != Mobilebone.classPage) {\n\t\t\t\t\t// inner ajax no history change\n\t\t\t\t\tparams.history = false;\n\t\t\t\t\t// title do not change\n\t\t\t\t\tparams.title = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// get mask element\n\t\t\tattrMask = aOrFormOrObj.getAttribute(\"data-mask\");\n\t\t\tif (attrMask == \"true\" || attrMask == \"\") {\n\t\t\t\teleMask = aOrFormOrObj.querySelector(\".\" + classMask);\n\t\t\t}\n\t\t}\n\t\t// if 'aOrFormOrObj' is a object\n\t\telse if (aOrFormOrObj.url) {\n\t\t\t// get params\n\t\t\tfor (key2 in defaults) {\n\t\t\t\tparams[key2] = aOrFormOrObj[key2] || defaults[key2];\n\t\t\t}\n\t\t\t// get url\n\t\t\tparams.url = this.getCleanUrl(null, params.url, params.data);\n\t\t\t// here params.title will become page title;\n\t\t\tparams.title = aOrFormOrObj.title;\n\t\t\t// v2.5.2\n\t\t\t// is back? for issues #128\n\t\t\t// when history.back()\n\t\t\tparams.back = aOrFormOrObj.back;\n\t\t\t// v2.6.1\n\t\t\tparams.container = aOrFormOrObj.container;\n\t\t\t// v2.7.4\n\t\t\tparams.query = _queryToObject(aOrFormOrObj.url.split('?')[1]);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\t// do ajax\n\t\t// get mask and loading element\n\t\tvar body = container || document.body;\n\t\tif (typeof attrMask != \"string\") {\n\t\t\teleMask = [].slice.call(body.children).filter(function (element) {\n\t\t\t\treturn element.classList.contains(classMask);\n\t\t\t})[0];\n\t\t}\n\n\t\tif (eleMask == null) {\n\t\t\teleMask = document.createElement(\"div\");\n\t\t\teleMask.className = classMask;\n\t\t\teleMask.innerHTML = '<i class=\"loading\"></i>';\n\t\t\tif (typeof attrMask == \"string\") {\n\t\t\t\taOrFormOrObj.appendChild(eleMask);\n\t\t\t} else {\n\t\t\t\tbody.appendChild(eleMask);\n\t\t\t}\n\t\t}\n\t\t// show loading\n\t\teleMask.style.display = \"inline\";\n\t\tif (this.showLoading) {\n\t\t\tthis.showLoading();\n\t\t}\n\n\t\t// ajax request\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open(params.type || \"GET\", params.url + (/\\?/.test(params.url)? \"&\" : \"?\") + \"r=\" + Date.now(), params.async, params.username, params.password);\n\t\txhr.timeout = params.timeout;\n\n\t\txhr.onload = function() {\n\t\t\t// so far, many browser hasn't supported responseType = 'json', so, use JSON.parse instead\n\t\t\tvar response = null;\n\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tif (params.dataType == \"json\" || params.dataType == \"JSON\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresponse = JSON.parse(xhr.response);\n\t\t\t\t\t\tparams.response = response;\n\t\t\t\t\t\tMobilebone.createPage(Mobilebone.jsonHandle(response, params), aOrFormOrObj, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tparams.message = \"JSON parse error\" + e.message;\n\t\t\t\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t\t\t}\n\t\t\t\t} else if (params.dataType == \"unknown\") {\n\t\t\t\t\t// ajax send by url\n\t\t\t\t\t// no history hush\n\t\t\t\t\tparams.history = false;\n\t\t\t\t\t// I don't remember why add 'params.remove = false' here,\n\t\t\t\t\t// but it seems that this will cause issues #147\n\t\t\t\t\t// no element remove\n\t\t\t\t\t// del  v2.5.8 // params.remove = false;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// as json\n\t\t\t\t\t\tresponse = JSON.parse(xhr.response);\n\t\t\t\t\t\tparams.response = response;\n\t\t\t\t\t\tMobilebone.createPage(Mobilebone.jsonHandle(response, params), aOrFormOrObj, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// as html\n\t\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t\t\tMobilebone.createPage(response, aOrFormOrObj, params);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t\t// 'response' is string\n\t\t\t\t\tMobilebone.createPage(response, aOrFormOrObj, params);\n\t\t\t\t}\n\t\t\t\tparams.success.call(params, response, xhr.status);\n\t\t\t} else {\n\t\t\t\tparams.message = \"The status code exception!\";\n\t\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t}\n\n\t\t\tparams.complete.call(params, xhr, xhr.status);\n\n\t\t\t// hide loading\n\t\t\teleMask.style.display = \"none\";\n\t\t\tif (this.hideLoading) {\n\t\t\t\tthis.hideLoading();\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function(e) {\n\t\t\tparams.message = \"Illegal request address or an unexpected network error!\";\n\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t// hide loading\n\t\t\teleMask.style.display = \"none\";\n\t\t\tif (this.hideLoading) {\n\t\t\t\tthis.hideLoading();\n\t\t\t}\n\t\t}\n\n\t\txhr.ontimeout = function() {\n\t\t\tparams.message = \"The request timeout!\";\n\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t// hide loading\n\t\t\teleMask.style.display = \"none\";\n\t\t\tif (this.hideLoading) {\n\t\t\t\tthis.hideLoading();\n\t\t\t}\n\t\t};\n\n\t\t// set request header for server\n\t\txhr.setRequestHeader(\"Type\", \"ajax\");\n\t\txhr.setRequestHeader(\"From\", \"mobilebone\");\n\n\t\txhr.send(formData);\n\t};\n\n\t/**\n\t * capture form submit events to a ajax request.\n\n\t * @params  form:        formElement. - Necessary\n\t * @example Mobilebone.form(document.querySelector(\"form\"));\n\t *\n\t**/\n\tMobilebone.submit = function(form) {\n\t\tif (!form || typeof form.action != \"string\") {\n\t\t\treturn;\n\t\t}\n\t\tvar ajax = form.getAttribute(\"data-ajax\");\n\t\tif (ajax == \"false\" || (Mobilebone.captureForm == false && ajax != \"true\")) return;\n\n\t\tform.addEventListener(\"submit\", function(event) {\n\t\t\t// prevent detect\n\t\t\tvar attrPrevent = this.getAttribute(\"data-preventdefault\");\n\t\t\t// get 'preventDefault' function\n\t\t\tvar funPrevent = Mobilebone.getFunction(attrPrevent);\n\t\t\tif (typeof funPrevent == \"function\" && funPrevent(this) == true) {\n\t\t\t\t// if the return value of prevent function is true, prevent everything~\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tMobilebone.ajax(this);\n\t\t\tevent.preventDefault();\n\t\t});\n\t};\n\n\n\t/**\n\t * Sometime we don't know direction of transition. Such as browser history change, or data-rel=\"auto\".\n\t   In this case, we ensure the direction(back or prev) by the sorts of two pages(into or out)\n\n\t * @params  pageIn  dom-object      - Necessary\n\t            pageOut  dom-object      - Optional\n\n\t * @returns boolean\n\t *\n\t**/\n\tMobilebone.isBack = function(pageIn, pageOut) {\n\t\t// back or forword, according to the order of two pages\n\t\tif (history.tempBack == true) {\n\t\t\t// backwords\n\t\t\thistory.tempBack = null;\n\t\t\treturn true;\n\t\t}\n\t\tif (typeof pageIn == \"undefined\") return true;\n\t\tif (!pageOut) return false;\n\t\treturn pageIn.compareDocumentPosition(pageOut) == 4;\n\t};\n\n\t/**\n\t * If dataType of ajax is 'json', we can't convert json-data to page-element.\n\t   So, we export a function names 'jsonHandle' to handle json-data.\n\t * Attention, it's a global interface. If your project has many json call, you should use JSON itself to make a distinction.\n\t   For example, every JSON include the only json-id:\n\t   {\n\t\t  \"id\": \"homePage\" ,\n\t\t  \"data\": []\n\t   }\n\t   different with\n\t   {\n\t\t  \"id\": \"listPage\" ,\n\t\t  \"data\": []\n\t   }\n\t *\n\t * @params  json    - Necessary\n\t * @returns dom-object|string\n\t *\n\t**/\n\tMobilebone.jsonHandle = function(json, params) {\n\t\treturn '<p style=\"text-align:center;\">Dear master, if you see me, show that JSON parsing function is undefined!</p>';\n\t},\n\n\t/**\n\t * Initialization. Load page according to location.hash. And bind link-catch events.\n\t**/\n\tMobilebone.init = function() {\n\t\tif (hasInited == true) return 'Don\\'t repeat initialization!';\n\n\t\tvar hash = location.hash.replace(\"#&\", \"#\"), eleIn = null, container = null;\n\t\t// \n\t\tvar key = hash.split(\"?\")[0];\n\t\tvar query = hash.split(\"?\")[1];\n\n\t\tvar options = {\n\t    \tquery: {}\n\t    };\n\t    if (query) {\n\t    \toptions.query = _queryToObject(query);\n\t    }\n\n\t\tif (key == \"\" || key == \"#\") {\n\t\t\tthis.transition(document.querySelector(\".\" + this.classPage));\n\t\t} else if (isSimple.test(key) == true && (eleIn = document.querySelector(key)) && eleIn.classList.contains(this.classPage)) {\n\t\t    // add on v2.7.4 pure inner hash also support query params\n\t\t    // eg. #somePageId?id=1&type=2\n\t\t    options.id = hash.replace(/^#/, \"\");\n\n\t\t\tthis.transition(eleIn, null, options);\n\t\t} else {\n\t\t\t// add on v2.6.1\n\t\t\tif (hash.split(\"container=\").length == 2) {\n\t\t\t\tcontainer = document.getElementById(hash.split(\"container=\")[1].split(\"&\")[0]);\n\t\t\t}\n\t\t\t// as a ajax\n\t\t\tthis.ajax({\n\t\t\t\turl: hash.replace(\"#\", \"\"),\n\t\t\t\tdataType: \"unknown\",\n\t\t\t\tcontainer: container,\n\t\t\t\terror: function() {\n\t\t\t\t\t// add on v2.7.4\n\t\t\t\t\toptions.id = hash.replace(/^#/, \"\");\n\n\t\t\t\t\teleIn = document.querySelector(\".\" + Mobilebone.classPage);\n\t\t\t\t\tMobilebone.transition(eleIn, null, options);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Initialization link-catch events.\n\t\tvar $ = root.$ || root.jQuery || root.Zepto;\n\t\tif ($ && $.fn && $.fn.tap && ('ontouchstart' in window == true)) {\n\t\t\t// for some unknown 'tap' plugin\n\t\t\t$(document).tap(this.handleTapEvent);\n\n\t\t\t// zepto tap event.preventDefault can't prevent default click-events\n\t\t\tdocument.addEventListener(\"click\", function(event) {\n\t\t\t\tvar target = event.target;\n\t\t\t\tif (!target) return;\n\t\t\t\tif (target.tagName.toLowerCase() != \"a\" && !(target = target.getParentElementByTag(\"a\"))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar ajax = target.getAttribute(\"data-ajax\"), href = target.href;\n\t\t\t\t// if not ajax request\n\t\t\t\tif (target.getAttribute(\"data-rel\") == \"external\"\n\t\t\t\t\t|| ajax == \"false\"\n\t\t\t\t\t|| (href.replace(\"://\", \"\").split(\"/\")[0] !== location.href.replace(\"://\", \"\").split(\"/\")[0] && ajax != \"true\")\n\t\t\t\t\t|| (Mobilebone.captureLink == false && ajax != \"true\")\n\t\t\t\t) {\n\t\t\t\t\t// issues #123 #137 #142\n\t\t\t\t\tif (/^http/i.test(href)) location.href = href;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t} else {\n\t\t\tdocument.addEventListener(\"click\", this.handleTapEvent);\n\t\t}\n\n\t\t// Important:\n\t\t// In ios7+, swipe the edge of page will navigate Safari\n\t\t// that will trigger 'popstate' events and the page will transition twice\n\t\tvar isSafari7 = !!navigator.userAgent.match(/safari/i) && !navigator.userAgent.match(/chrome/i) && typeof document.hidden !== \"undefined\" && !window.chrome;\n\t\tif ('ontouchstart' in window == true && isSafari7) {\n\t\t\tdocument.addEventListener(\"touchmove\", function() {\n\t\t\t\thistory.popstateswipe = true;\n\t\t\t});\n\t\t\tdocument.addEventListener(\"touchend\", function() {\n\t\t\t\thistory.popstateswipe = false;\n\t\t\t});\n\t\t}\n\n\t\t// change flag-var for avoiding repeat init\n\t\thasInited = true;\n\t};\n\n\t/**\n\t * If 'a' element has href, slide auto when tapping~\n\t**/\n\tMobilebone.handleTapEvent = function(event) {\n\t\t/**\n\t\t// iscroll(set tap: true) may cause twice tap problem\n\t\t// which is none of Mobilebone's business\n\t\t// However, you can let code below go to avoid twice tap in Mobilebone\n\t\t// but the tap event bind out of Mobilebone also has bug\n\t\t// so my advice is that:\n\t\t// 1. use Date.now to judge as Mobilebone did;\n\t\t// or\n\t\t// 2. keep this code in the form of comment and fixed bug outside\n\t\tif (store.timerTap && Date.now() - store.timerTap < 100) {\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\t\tstore.timerTap = Date.now();\n\t\t*/\n\t\tvar target = null;\n\t\t// you can pass target as params directly\n\t\tif (event && event.nodeType == 1) {\n\t\t\ttarget = event;\n\t\t\ttarget.preventDefault = function() {};\n\t\t}\n\t\t// get target and href\n\t\ttarget = target || event.target || event.touches[0];\n\t\tvar href = target.href;\n\t\tif ((!href || /a/i.test(target.tagName) == false) && (target = target.getParentElementByTag(\"a\"))) {\n\t\t\thref = target.href;\n\t\t}\n\t\t// the page that current touched or actived\n\t\tvar selfPage = document.querySelector(\".in.\" + Mobilebone.classPage);\n\n\t\tif (selfPage == null || !target) {\n\t\t\treturn;\n\t\t}\n\n\t\t// optional params for Mobilebone.transition\n\t\tvar options = {\n\t\t\ttarget: target\n\t\t};\n\n\t\t// prevent detect\n\t\tvar attrPrevent = target.getAttribute(\"data-preventdefault\")\n\t\t\t|| _queryToObject(target.getAttribute(\"data-params\") || \"\").preventdefault;\n\t\t// get 'preventDefault' function\n\t\tvar funPrevent = Mobilebone.getFunction(attrPrevent);\n\t\tif (typeof funPrevent == \"function\" && funPrevent(target) == true) {\n\t\t\t// if the return value of prevent function is true, prevent everything~\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\n\t\t// if mask element exist and displaying, prevent double trigger\n\t\tvar eleMask = target.getElementsByClassName(Mobilebone.classMask)[0];\n\t\tif (eleMask && eleMask.style.display != \"none\") {\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\n\t\tvar idContainer = target.getAttribute(\"data-container\"),\n\t\t\tclassPageInside = target.getAttribute(\"data-classpage\");\n\t\tvar container = idContainer && document.getElementById(idContainer);\n\t\tif (container && classPageInside && classPageInside != Mobilebone.classPage) {\n\t\t\tselfPage = container.querySelector(\".in.\" + classPageInside) || container.querySelector(classPageInside);\n\t\t\t// if (selfPage == null) return false;\n\t\t\toptions.history = false;\n\t\t\toptions.title = false;\n\t\t\toptions.classPage = classPageInside;\n\t\t}\n\n\t\t// history\n\t\tif (target.getAttribute(\"data-history\") == \"false\") {\n\t\t\toptions.history = false;\n\t\t}\n\n\t\t// if captureLink\n\t\tvar capture = (Mobilebone.captureLink == true);\n\t\t// get rel\n\t\tvar rel = target.getAttribute(\"data-rel\");\n\t\t// if back\n\t\tvar back = false;\n\t\tif (rel == \"back\") {\n\t\t\tback = true;\n\t\t}\n\n\t\t// if external link\n\t\tvar external = (rel == \"external\");\n\n\t\t// if the 'href' is not legal, return\n\t\t// include:\n\t\t// 1. undefined\n\t\t// 2. javascript: (except data-rel=\"back\")\n\t\t// 3. cros, or not capture (except data-ajax=\"true\")\n\t\tif (!href) return;\n\n\t\thref = href.replace(\"#&\", \"#\");\n\n\t\tif (target.getAttribute(\"href\").replace(/#/g, \"\") === \"\") {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (/^javascript/.test(href)) {\n\t\t\tif (back == false) return;\n\t\t} else {\n\t\t\texternal = external || (href.replace(\"://\", \"\").split(\"/\")[0] !== location.href.replace(\"://\", \"\").split(\"/\")[0]);\n\t\t\tif ((external == true || capture == false) && target.getAttribute(\"data-ajax\") != \"true\") return;\n\t\t}\n\n\t\tvar attrHref = target.getAttribute(\"href\");\n\n\t\t// judge that if it's a ajax request\n\t\tif (/^#/.test(attrHref) == true) {\n\t\t\t// hash slide\n\t\t\tvar hashTargetPage = href.split(\"#\")[1];\n\t\t\tvar idTargetPage = hashTargetPage.split(\"?\")[0];\n\t\t\tvar queryTargetPage = hashTargetPage.split(\"?\")[1];\n\t\t\t// add on v2.7.4\n\t\t\toptions.query = _queryToObject(queryTargetPage);\n\t\t\toptions.id = hashTargetPage;\n\n\t\t\tvar eleTargetPage = idTargetPage && document.getElementById(idTargetPage);\n\t\t\tif (back == false && rel == \"auto\") {\n\t\t\t\tback = Mobilebone.isBack(eleTargetPage, selfPage);\n\t\t\t}\n\n\t\t\tif (eleTargetPage) {\n\t\t\t\tMobilebone.transition(eleTargetPage, selfPage, back, options);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t} else if (/^javascript/.test(href)) {\n\t\t\t// back\n\t\t\thistory.tempBack = true;\n\t\t\thistory.back();\n\t\t} else if (target.getAttribute(\"data-ajax\") != \"false\") {\n\t\t\t// get a clean ajax url as page id\n\t\t\tvar cleanUrl = Mobilebone.getCleanUrl(target);\n\t\t\t// add on v2.7.4\n\t\t\toptions.query = _queryToObject(cleanUrl.split(\"?\")[1]);\n\t\t\t// if has loaded and the value of 'data-reload' is not 'true'\n\t\t\tvar attrReload = target.getAttribute(\"data-reload\");\n\n\n\t\t\tif ((attrReload == null || attrReload == \"false\") && store[cleanUrl]) {\n\t\t\t\tif (back == false && rel == \"auto\") {\n\t\t\t\t\tback = Mobilebone.isBack(store[cleanUrl], selfPage);\n\t\t\t\t}\n\t\t\t\toptions.id = cleanUrl;\n\n\t\t\t\tvar body = container || document.body;\n\n\t\t\t\tif (body.contains(store[cleanUrl]) == false) {\n\t\t\t\t\tbody.appendChild(store[cleanUrl]);\n\t\t\t\t}\n\t\t\t\tMobilebone.transition(store[cleanUrl], selfPage, back, options);\n\t\t\t} else {\n\t\t\t\t// v2.7.0 move to here\n\t\t\t\tif (typeof attrReload == \"string\" && attrReload != \"false\") {\n\t\t\t\t\tif (attrReload != \"\" && attrReload != \"true\") {\n\t\t\t\t\t\t// v2.7.2 a new method to remove pafe\n\t\t\t\t\t\t// think 'attrReload' as special ID\n\t\t\t\t\t\t// remove all page using this ID\n\t\t\t\t\t\tslice.call(document.querySelectorAll('a[data-reload=\"'+ attrReload +'\"]')).forEach(function (ele) {\n\t\t\t\t\t\t\tMobilebone.remove(ele);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// remove page\n\t\t\t\t\t\tMobilebone.remove(store[cleanUrl]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// as ajax\n\t\t\t\tMobilebone.ajax(target);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\n\n\t/**\n\t * prototype extend method: get parent element by tagName\n\t**/\n\tElement.prototype.getParentElementByTag = function(tag) {\n\t\tif (!tag) return null;\n\t\tvar element = null, parent = this;\n\t\tvar popup = function() {\n\t\t\tparent = parent.parentElement;\n\t\t\tif (!parent) return null;\n\t\t\tvar tagParent = parent.tagName.toLowerCase();\n\t\t\tif (tagParent === tag) {\n\t\t\t\telement = parent;\n\t\t\t} else if (tagParent == \"body\") {\n\t\t\t\telement = null;\n\t\t\t} else {\n\t\t\t\tpopup();\n\t\t\t}\n\t\t};\n\t\tpopup();\n\t\treturn element;\n\t};\n\n\t/**\n\t * private method: convert query string to key-value object\n\t**/\n\tvar _queryToObject = function(string) {\n\t\tvar obj = {};\n\t\tif (typeof string == \"string\") {\n\t\t\tstring.split(\"&\").forEach(function(part) {\n\t\t\t\tvar arrPart = part.split(\"=\");\n\t\t\t\tif (arrPart.length > 1) {\n\t\t\t\t\tobj[arrPart[0]] = part.replace(arrPart[0] + \"=\", \"\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn obj;\n\t};\n\n\t/**\n\t * auto init\n\t**/\n\twindow.addEventListener(\"DOMContentLoaded\", function() {\n\t\tif (hasInited == false) {\n\t\t\tMobilebone.init();\n\t\t}\n\t});\n\n\t/**\n\t * page change when history change\n\t**/\n\twindow.addEventListener(\"popstate\", function() {\n\t\tif (history.popstateswipe == true) {\n\t\t\tlocation.reload();\n\t\t\thistory.popstateswipe = false;\n\t\t\treturn;\n\t\t}\n\t\tif (history.popstate == false) {\n\t\t\thistory.popstate = true;\n\t\t\treturn;\n\t\t}\n\n\t\tvar hash = location.hash.replace(\"#&\", \"#\").replace(/^#/, \"\");\n\t\t// add on v2.7.4\n\t\tvar key = hash.split('?')[0];\n\t\tvar pageIn = null\n\t\t// add on v2.6.1\n\t\tvar container = null;\n\n\t\tif (hash == \"\") {\n\t\t\t// if no hash, get first page as 'pageIn'\n\t\t\tpageIn = document.querySelector(\".\" + Mobilebone.classPage);\n\t\t\tif (pageIn.id) return;\n\t\t} else {\n\t\t\t// add on v2.7.4\n\t\t\tpageIn = store[key] || store[hash];\n\n\t\t\t// add on v2.6.1\n\t\t\tif (hash.split(\"container=\").length == 2) {\n\t\t\t\tcontainer = document.getElementById(hash.split(\"container=\")[1].split(\"&\")[0]);\n\t\t\t}\n\n\t\t\tif (pageIn && isSimple.test(key) == false) {\n\t\t\t\t// just transition\n\t\t\t\tMobilebone.transition(pageIn, document.querySelector(\".in.\" + Mobilebone.classPage), true, {\n\t\t\t\t\tid: hash,  // fix issue #83\n\t\t\t\t\thistory: false,\n\t\t\t\t\tcontainer: container,\n\t\t\t\t\tquery: _queryToObject(hash.split('?')[1])\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!pageIn) {\n\t\t\tif (isSimple.test(hash) == false) {\n\t\t\t\t// as a url\n\t\t\t\tMobilebone.ajax({\n\t\t\t\t\turl: hash,\n\t\t\t\t\tdataType: \"unknown\",\n\t\t\t\t\tback: Mobilebone.isBack(),\n\t\t\t\t\tcontainer: container\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpageIn = document.querySelector(\"#\" + key) || document.querySelector(\"#\" + hash);\n\t\t}\n\n\t\tvar pageOut = document.querySelector(\".in.\" + Mobilebone.classPage);\n\n\t\tif ((pageIn && pageIn == pageOut) || Mobilebone.pushStateEnabled == false) return;\n\n\t\t// hash  id\n\t\tif (pageIn) {\n\t\t\tMobilebone.transition(pageIn, pageOut, Mobilebone.isBack(pageIn, pageOut), {\n\t\t\t\tid: hash,  // fix issue #83\n\t\t\t\thistory: false,\n\t\t\t\tquery: _queryToObject(hash.split('?')[1])\n\t\t\t});\n\t\t}\n\t});\n\n\tdocument.MBLOADED = true;\n\n\treturn Mobilebone;\n});","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}